(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d213e9c"],{af67:function(a,e,t){"use strict";t.r(e);var l=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"w-full"},[t("vx-card",[t("vs-tabs",{model:{value:a.tabIndex,callback:function(e){a.tabIndex=e},expression:"tabIndex"}},[t("vs-tab",{attrs:{label:"Data Kartu Keluarga"}},[t("div",{staticClass:"head-family"},[t("h4",{staticClass:"my-4"},[a._v("Data Kepala Keluarga")]),t("div",{staticClass:"vx-row"},[t("div",{staticClass:"vx-col md:w-1/2 w-full"},[t("div",{staticClass:"vx-row"},[t("div",{staticClass:"vx-col w-full mb-4"},[t("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|digits:16",expression:"'required|digits:16'"}],staticClass:"w-full",attrs:{label:"Nomor Kartu Keluarga (NO KK)",name:"NO KK",danger:!!a.errors.first("NO KK"),"danger-text":a.errors.first("NO KK"),"val-icon-danger":"clear"},model:{value:a.payload.head_family.head_family_nik,callback:function(e){a.$set(a.payload.head_family,"head_family_nik",e)},expression:"payload.head_family.head_family_nik"}})],1),t("div",{staticClass:"vx-col w-full mb-4"},[t("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{label:"Nama",name:"Nama Kepala Keluarga",danger:!!a.errors.first("Nama Kepala Keluarga"),"danger-text":a.errors.first("Nama Kepala Keluarga"),"val-icon-danger":"clear"},model:{value:a.payload.head_family.name,callback:function(e){a.$set(a.payload.head_family,"name",e)},expression:"payload.head_family.name"}})],1),t("div",{staticClass:"vx-col w-full mb-4"},[t("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{label:"Alamat",name:"Alamat Kepala Keluarga",danger:!!a.errors.first("Alamat Kepala Keluarga"),"danger-text":a.errors.first("Alamat Kepala Keluarga"),"val-icon-danger":"clear"},model:{value:a.payload.head_family.address,callback:function(e){a.$set(a.payload.head_family,"address",e)},expression:"payload.head_family.address"}})],1),t("div",{staticClass:"vx-col w-full mb-4"},[t("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{label:"Kode Pos",name:"Kode Pos",danger:!!a.errors.first("Kode Pos"),"danger-text":a.errors.first("Kode Pos"),"val-icon-danger":"clear"},model:{value:a.payload.head_family.postal_code,callback:function(e){a.$set(a.payload.head_family,"postal_code",e)},expression:"payload.head_family.postal_code"}})],1)])]),t("div",{staticClass:"vx-col md:w-1/2 w-full"},[t("div",{staticClass:"vx-row"},[t("div",{staticClass:"vx-col w-full mb-4"},[t("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{label:"Kelurahan",name:"Kelurahan",danger:!!a.errors.first("Kelurahan"),"danger-text":a.errors.first("Kelurahan"),"val-icon-danger":"clear"},model:{value:a.payload.head_family.kelurahan,callback:function(e){a.$set(a.payload.head_family,"kelurahan",e)},expression:"payload.head_family.kelurahan"}})],1),t("div",{staticClass:"vx-col w-full mb-4"},[t("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{label:"Kecamatan",name:"Kecamatan",danger:!!a.errors.first("Kecamatan"),"danger-text":a.errors.first("Kecamatan"),"val-icon-danger":"clear"},model:{value:a.payload.head_family.kecamatan,callback:function(e){a.$set(a.payload.head_family,"kecamatan",e)},expression:"payload.head_family.kecamatan"}})],1),t("div",{staticClass:"vx-col w-full mb-4"},[t("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{label:"Kota",name:"Kota",danger:!!a.errors.first("Kota"),"danger-text":a.errors.first("Kota"),"val-icon-danger":"clear"},model:{value:a.payload.head_family.city,callback:function(e){a.$set(a.payload.head_family,"city",e)},expression:"payload.head_family.city"}})],1),t("div",{staticClass:"vx-col w-full mb-4"},[t("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{label:"Provinsi",name:"Provinsi",danger:!!a.errors.first("Provinsi"),"danger-text":a.errors.first("Provinsi"),"val-icon-danger":"clear"},model:{value:a.payload.head_family.province,callback:function(e){a.$set(a.payload.head_family,"province",e)},expression:"payload.head_family.province"}})],1)])])])])]),t("vs-tab",{attrs:{label:"Data dalam Kartu Keluarga"}},[t("div",{staticClass:"resident"},[t("h4",{staticClass:"my-4"},[a._v("Data Penduduk")]),a._l(a.payload.resident,(function(e,l){return t("div",{key:l,staticClass:"vx-row"},[t("div",{staticClass:"w-full flex justify-between items-center px-4"},[t("h5",{class:{"mb-4":0===l}},[a._v("Penduduk "+a._s(l+1))]),t("div",{staticClass:"flex"},[1===a.tabIndex?t("vs-button",{class:{"mr-4":0!==l},attrs:{color:"success",icon:"add"},on:{click:a.addResident}}):a._e(),1===a.tabIndex&&0!==l?t("vs-button",{attrs:{color:"danger",icon:"remove"},on:{click:function(e){return a.removeResident(l)}}}):a._e()],1)]),t("div",{staticClass:"vx-col md:w-1/2 w-full"},[t("div",{staticClass:"vx-row"},[t("div",{staticClass:"vx-col w-full mb-4"},[t("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|digits:16",expression:"'required|digits:16'"}],staticClass:"w-full",attrs:{label:"Nomor Induk Kependudukan (NO NIK)",name:"Nomor Induk Kependudukan (NO NIK)",danger:!!a.errors.first("Nomor Induk Kependudukan (NO NIK)"),"danger-text":a.errors.first("Nomor Induk Kependudukan (NO NIK)"),"val-icon-danger":"clear"},model:{value:a.payload.resident[l].nik_id,callback:function(e){a.$set(a.payload.resident[l],"nik_id",e)},expression:"payload.resident[index].nik_id"}})],1),t("div",{staticClass:"vx-col w-full mb-4"},[t("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{label:"Nama",name:"Nama",danger:!!a.errors.first("Nama"),"danger-text":a.errors.first("Nama"),"val-icon-danger":"clear"},model:{value:a.payload.resident[l].name,callback:function(e){a.$set(a.payload.resident[l],"name",e)},expression:"payload.resident[index].name"}})],1),t("div",{staticClass:"vx-col w-full mb-4"},[t("label",{staticClass:"vs-input--label"},[a._v("Jenis Kelamin")]),t("v-select",{attrs:{reduce:function(a){return a.key},options:a.genders},model:{value:a.payload.resident[l].gender,callback:function(e){a.$set(a.payload.resident[l],"gender",e)},expression:"payload.resident[index].gender"}})],1),t("div",{staticClass:"vx-col w-full mb-4"},[t("vs-input",{staticClass:"w-full",attrs:{label:"Alamat",name:"Alamat",disabled:!0,tabindex:"-1"},model:{value:a.payload.resident[l].address,callback:function(e){a.$set(a.payload.resident[l],"address",e)},expression:"payload.resident[index].address"}})],1)])]),t("div",{staticClass:"vx-col md:w-1/2 w-full"},[t("div",{staticClass:"vx-row"},[t("div",{staticClass:"vx-col w-full mb-4"},[t("label",{staticClass:"vs-input--label"},[a._v("Agama")]),t("v-select",{attrs:{reduce:function(a){return a.key},options:a.religions},model:{value:a.payload.resident[l].religion,callback:function(e){a.$set(a.payload.resident[l],"religion",e)},expression:"payload.resident[index].religion"}})],1),t("div",{staticClass:"vx-col w-full mb-4"},[t("label",{staticClass:"vs-input--label"},[a._v("Pekerjaan")]),t("v-select",{attrs:{options:a.jobs},model:{value:a.payload.resident[l].occupation,callback:function(e){a.$set(a.payload.resident[l],"occupation",e)},expression:"payload.resident[index].occupation"}})],1),t("div",{staticClass:"vx-col w-full mb-4"},[t("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{label:"Tempat Lahir",name:"Tempat Lahir",danger:!!a.errors.first("Tempat Lahir"),"danger-text":a.errors.first("Tempat Lahir"),"val-icon-danger":"clear"},model:{value:a.payload.resident[l].birth_place,callback:function(e){a.$set(a.payload.resident[l],"birth_place",e)},expression:"payload.resident[index].birth_place"}})],1),t("div",{staticClass:"vx-col w-full mb-4"},[t("label",{staticClass:"vs-input--label"},[a._v("Tanggal Lahir")]),t("datepicker",{attrs:{language:a.languages["id"],format:"dd-MM-yyyy"},model:{value:a.payload.resident[l].birth_date,callback:function(e){a.$set(a.payload.resident[l],"birth_date",e)},expression:"payload.resident[index].birth_date"}})],1)])]),t("vs-divider")],1)}))],2)])],1),t("div",{staticClass:"action-button"},[0===a.tabIndex?t("vs-button",{staticClass:"mr-4",attrs:{disabled:!a.validKK},on:{click:function(e){a.tabIndex+=1}}},[a._v("Lanjut")]):t("vs-button",{staticClass:"mr-4",attrs:{disabled:!a.validKK},on:{click:a.submit}},[a._v("Perbarui")]),t("vs-button",{attrs:{color:"danger",type:"border"},on:{click:a.cancel}},[a._v("Cancel")])],1)],1),t("vs-prompt",{attrs:{title:"Hapus Penduduk","accept-text":"Ya","cancel-text":"Tidak",active:a.activePrompt},on:{accept:a.removeFormResident,"update:active":function(e){a.activePrompt=e}}},[t("div",[a._v("\n      Apa Anda yakin untuk menghapus penduduk ini ?\n    ")])])],1)},i=[],s=(t("7f7f"),t("ee9b")),d=t("5b8d"),r=t("c1df"),n=t.n(r),o={name:"Edit",data:function(){return{form:{nik_id:"",name:"",gender:"",religion:"",address:"",birth_place:"",birth_date:"",occupation:""},payload:{head_family:{head_family_nik:"",name:"",address:"",postal_code:"",kelurahan:"",kecamatan:"",city:"",province:""},resident:[{nik_id:"",name:"",gender:"",religion:"",address:"",birth_place:"",birth_date:"",occupation:""}]},genders:[{key:"L",label:"Laki-Laki"},{key:"P",label:"Perempuan"}],religions:[{key:"Islam",label:"Islam"},{key:"Kristen",label:"Kristen"},{key:"Hindu",label:"Hindu"},{key:"Buddha",label:"Buddha"},{key:"Konghucu",label:"Konghucu"}],lastEducations:["TIDAK / BELUM SEKOLAH","BELUM TAMAT SD / SEDERAJAT","TAMAT SD / SEDERAJAT","SLTP / SEDERAJAT","SLTA / SEDERAJAT","DIPLOMA I / II","AKADEMI/ DIPLOMA III/S. MUDA","DIPLOMA IV/ STRATA I","STRATA II","STRATA III"],jobs:["Tidak Bekerja","Wiraswasta","Karyawan Swasta","PNS","Guru","Ibu Rumah Tangga","Pelajar/Mahasiswa","Lain-lain"],languages:s,tabIndex:0,activePrompt:!1,index:""}},watch:{"payload.head_family.address":function(){this.fillAddress()}},computed:{validKK:function(){return""!==this.payload.head_family.head_family_nik&&""!==this.payload.head_family.name&&""!==this.payload.head_family.address&&""!==this.payload.head_family.postal_code&&""!==this.payload.head_family.kelurahan&&""!==this.payload.head_family.kecamatan&&""!==this.payload.head_family.city&&""!==this.payload.head_family.province}},methods:{fetchResident:function(){var a=this;this.$vs.loading(),d["a"].show(this.$route.params.id).then((function(e){a.$vs.loading.close(),e.data.data&&(a.payload=e.data.data)})).catch((function(e){throw a.$vs.loading.close(),new Error(e)}))},submit:function(){var a=this;this.$vs.loading(),this.payload.resident.filter((function(a){return a.birth_date=n()(a.birth_date).format("YYYY-MM-DD")})),d["a"].edit(this.payload).then((function(e){a.$vs.loading.close(),e.data.data&&(a.$vs.notify({title:"Berhasil",text:"Edit Penduduk Berhasil !",color:"success",time:1500}),a.$router.push("/penduduk"))})).catch((function(e){throw a.$vs.loading.close(),new Error(e)}))},addResident:function(){this.payload.resident.push(this.form),this.fillAddress()},removeFormResident:function(){this.payload.resident.splice(this.index,1)},removeResident:function(a){this.index=a,this.activePrompt=!this.activePrompt},fillAddress:function(){var a=this;this.payload.resident.map((function(e,t){a.payload.resident[t].address=a.payload.head_family.address}))},cancel:function(){this.$router.push("/penduduk")}},created:function(){this.fetchResident()}},c=o,u=t("2877"),v=Object(u["a"])(c,l,i,!1,null,"27d49fba",null);e["default"]=v.exports}}]);
//# sourceMappingURL=chunk-2d213e9c.0999b5e9.js.map