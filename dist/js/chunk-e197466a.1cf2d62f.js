(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e197466a"],{"74f4":function(t,e,n){"use strict";var a=n("bb36");e["a"]=a["a"]},"93e2":function(t,e,n){"use strict";var a=n("74f4");e["a"]={index:function(t){return a["a"].get("/api/announcement?".concat(t))},markNotActive:function(t){return a["a"].put("/api/announcement/mark-not-active/".concat(t))},store:function(t){return a["a"].post("/api/announcement/store",t)}}},f260c:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"md:mt-2 md:float-left text-right"},[n("vs-dropdown",{staticClass:"cursor-pointer sm:mr-3 mr-0 sm:mb-0 mb-3",attrs:{"vs-trigger-click":""}},[n("div",{staticClass:"p-4 border border-solid d-theme-border-grey-light rounded-full d-theme-dark-bg cursor-pointer flex items-center justify-between font-medium"},[n("span",{staticClass:"mr-2"},[t._v(t._s(t.currentPage*t.paginationPageSize-(t.paginationPageSize-1))+" - "+t._s(t.table.meta.total_record-t.currentPage*t.paginationPageSize>0?t.currentPage*t.paginationPageSize:t.table.meta.total_record)+" of "+t._s(t.table.meta.total_record))]),n("feather-icon",{attrs:{icon:"ChevronDownIcon",svgClasses:"h-4 w-4"}})],1),n("vs-dropdown-menu",[n("vs-dropdown-item",{on:{click:function(e){return t.handlePerPage(5)}}},[n("span",[t._v("5")])]),n("vs-dropdown-item",{on:{click:function(e){return t.handlePerPage(10)}}},[n("span",[t._v("10")])]),n("vs-dropdown-item",{on:{click:function(e){return t.handlePerPage(25)}}},[n("span",[t._v("25")])]),n("vs-dropdown-item",{on:{click:function(e){return t.handlePerPage(50)}}},[n("span",[t._v("50")])])],1)],1),n("vs-button",{on:{click:function(e){t.activePrompt=!t.activePrompt}}},[t._v("Tambah Pengumuman")])],1),n("vx-table",{attrs:{search:"",table:t.table,"max-items":t.table.meta.per_page},scopedSlots:t._u([{key:"no",fn:function(e){return[t._v("\n      "+t._s(e.index)+"\n    ")]}},{key:"type",fn:function(e){return[t._v("\n      "+t._s(t._f("capitalize")(e.row.type))+"\n    ")]}},{key:"residentName",fn:function(e){return[t._v("\n      "+t._s(e.row.resident.name)+"\n    ")]}},{key:"created_at",fn:function(e){return[t._v("\n      "+t._s(t._f("date_filter")(e.row.created_at))+"\n    ")]}},{key:"aksi",fn:function(e){return[n("vx-tooltip",{staticClass:"text-center",attrs:{text:"Tandai untuk nonaktifkan"}},[n("feather-icon",{attrs:{icon:"XIcon"},on:{click:function(n){return t.markNotActive(e.row)}}})],1)]}},{key:"expand-slot",fn:function(e){return[n("div",[n("h6",{staticClass:"mb-3 font-bold text-white"},[t._v("Isi :")]),n("p",[t._v(t._s(e.row.body))])])]}}])}),n("vs-pagination",{staticClass:"mt-5",attrs:{total:t.totalPages},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}),n("vs-prompt",{attrs:{"accept-text":"Kirim","is-valid":t.validateForm,title:"Tambah Pengumuman",active:t.activePrompt},on:{cancel:t.reset,close:t.reset,accept:function(e){return t.sendAnnouncement()},"update:active":function(e){t.activePrompt=e}}},[n("div",{staticClass:"vx-row mb-6"},[n("div",{staticClass:"vx-col sm:w-1/5 w-full"},[n("label",{attrs:{for:"subject"}},[t._v("Judul")])]),n("div",{staticClass:"vx-col sm:w-4/5 w-full"},[n("vs-input",{staticClass:"w-full",attrs:{id:"subject"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1)]),n("div",{staticClass:"vx-row mb-6"},[n("div",{staticClass:"vx-col sm:w-1/5 w-full"},[n("label",{attrs:{for:"body"}},[t._v("Isi")])]),n("div",{staticClass:"vx-col sm:w-4/5 w-full"},[n("vs-textarea",{staticClass:"w-full",attrs:{id:"body"},model:{value:t.body,callback:function(e){t.body=e},expression:"body"}})],1)])])],1)},i=[],o=(n("c5f6"),n("93e2")),r={name:"Announcement",data:function(){return{title:"",body:"",activePrompt:!1,table:{data:[],columns:[{key:"no",label:"No"},{key:"title",label:"Judul"},{key:"created_at",label:"Tanggal Pengumuman"},{key:"aksi"}],meta:{},page:1,perPage:10}}},computed:{paginationPageSize:function(){return this.table.meta?this.table.meta.per_page:10},totalPages:function(){return this.table.meta?Number(this.table.meta.last_page):Number(0)},currentPage:{get:function(){return this.table.meta?this.table.meta.current_page:1},set:function(t){this.table.page=t,this.fetchAnnouncement()}},validateForm:function(){return""!==this.title&&""!==this.body}},methods:{fetchAnnouncement:function(){var t=this,e="page=".concat(this.table.page,"&perPage=").concat(this.table.perPage);o["a"].index(e).then((function(e){var n=e.data.data;t.table.data=n.record,t.table.meta=n.meta_pagination})).catch((function(t){throw new Error(t)}))},sendAnnouncement:function(){var t=this;new Promise((function(e,n){var a={title:t.title,body:t.body};o["a"].store(a).then((function(a){a.data.data?(t.$vs.notify({title:"Berhasil!",text:"Pemberitahuan Anda telah diterbitkan",iconPack:"feather",icon:"icon-check-circle",color:"primary"}),t.fetchAnnouncement(),t.reset(),e(a)):n("Gagal!")})).catch((function(e){t.$vs.notify({title:"Gagal!",text:"Maaf ada kesalahan, coba lagi",iconPack:"feather",icon:"icon-alert-circle",color:"danger"}),n(e)}))}))},markNotActive:function(t){var e=this;1===t.is_active&&o["a"].markNotActive(t.id).then((function(){e.$vs.notify({title:"Berhasil!",text:"",iconPack:"feather",icon:"icon-check-circle",color:"primary"}),e.fetchAnnouncement()})).catch((function(t){throw new Error(t)}))},handlePerPage:function(t){this.table.perPage=t,this.fetchAnnouncement()},reset:function(){this.title="",this.body=""}},created:function(){this.fetchAnnouncement()}},c=r,s=n("2877"),l=Object(s["a"])(c,a,i,!1,null,"22f84d9b",null);e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-e197466a.1cf2d62f.js.map