{"version":3,"sources":["webpack:///./src/http/resident.js","webpack:///./src/views/admin/resident/Index.vue?4ed4","webpack:///src/views/admin/resident/Index.vue","webpack:///./src/views/admin/resident/Index.vue?9197","webpack:///./src/views/admin/resident/Index.vue"],"names":["index","params","axios","get","show","id","store","payload","post","edit","put","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","_s","currentPage","paginationPageSize","table","meta","total_record","on","$event","handlePerPage","openPrompt","printKK","printSP","per_page","scopedSlots","_u","key","fn","props","row","head_family","head_family_nik","name","address","editResident","resident","ref","data","_l","tr","indextr","nik_id","gender","birth_place","birth_date","occupation","slot","totalPages","model","value","callback","$$v","expression","activePrompt","clearFields","exportData","fileName","types","selectedType","formats","selectedFormat","directives","rawName","dataKK","indexKK","staticRenderFns","columns","page","perPage","dataExcel","cellAutoWidth","headerTitleKK","headerValKK","kkArr","headerTitleSP","headerValSP","spArr","isFetchedPrintData","v","j","d","component"],"mappings":"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","file":"js/chunk-7b20fa5f.2b63a63a.js","sourcesContent":["import axios from \"./axios\";\n\nexport default {\n  index(params) {\n    return axios.get(`/api/head-family?${params}`);\n  },\n  show(id) {\n    return axios.get(`/api/head-family/${id}`);\n  },\n  store(payload) {\n    return axios.post('/api/head-family/store', payload);\n  },\n  edit(payload) {\n    return axios.put('/api/head-family/update', payload);\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"md:mt-2 md:float-left text-right\"},[_c('vs-dropdown',{staticClass:\"cursor-pointer sm:mr-3 mr-0 sm:mb-0 mb-3\",attrs:{\"vs-trigger-click\":\"\"}},[_c('div',{staticClass:\"p-4 border border-solid d-theme-border-grey-light rounded-full d-theme-dark-bg cursor-pointer flex items-center justify-between font-medium\"},[_c('span',{staticClass:\"mr-2\"},[_vm._v(_vm._s(_vm.currentPage * _vm.paginationPageSize - (_vm.paginationPageSize - 1))+\" - \"+_vm._s(_vm.table.meta.total_record - _vm.currentPage * _vm.paginationPageSize > 0 ? _vm.currentPage * _vm.paginationPageSize : _vm.table.meta.total_record)+\" of \"+_vm._s(_vm.table.meta.total_record))]),_c('feather-icon',{attrs:{\"icon\":\"ChevronDownIcon\",\"svgClasses\":\"h-4 w-4\"}})],1),_c('vs-dropdown-menu',[_c('vs-dropdown-item',{on:{\"click\":function($event){return _vm.handlePerPage(5)}}},[_c('span',[_vm._v(\"5\")])]),_c('vs-dropdown-item',{on:{\"click\":function($event){return _vm.handlePerPage(10)}}},[_c('span',[_vm._v(\"10\")])]),_c('vs-dropdown-item',{on:{\"click\":function($event){return _vm.handlePerPage(25)}}},[_c('span',[_vm._v(\"25\")])]),_c('vs-dropdown-item',{on:{\"click\":function($event){return _vm.handlePerPage(50)}}},[_c('span',[_vm._v(\"50\")])])],1)],1),_c('vs-button',{staticClass:\"sm:mb-0 mb-3 sm:mr-2 mr-0\",attrs:{\"to\":\"/penduduk/tambah\"}},[_vm._v(\"Tambah Penduduk\")]),_c('vs-button',{staticClass:\"sm:mb-0 mb-3 sm:mr-2 mr-0\",attrs:{\"color\":\"success\"},on:{\"click\":_vm.openPrompt}},[_vm._v(\"Export\")]),_c('vs-button',{staticClass:\"sm:mb-0 mb-3 sm:mr-2 mr-0\",attrs:{\"color\":\"success\"},on:{\"click\":_vm.printKK}},[_vm._v(\"Print KK\")]),_c('vs-button',{attrs:{\"color\":\"success\"},on:{\"click\":_vm.printSP}},[_vm._v(\"Print Seluruh Penduduk\")])],1),_c('vx-table',{attrs:{\"search\":\"\",\"table\":_vm.table,\"max-items\":_vm.table.meta.per_page},scopedSlots:_vm._u([{key:\"no\",fn:function(props){return [_vm._v(\"\\n      \"+_vm._s(props.index)+\"\\n    \")]}},{key:\"head_family_nik\",fn:function(props){return [_vm._v(\"\\n      \"+_vm._s(props.row.head_family.head_family_nik)+\"\\n    \")]}},{key:\"name\",fn:function(props){return [_vm._v(\"\\n      \"+_vm._s(props.row.head_family.name)+\"\\n    \")]}},{key:\"address\",fn:function(props){return [_vm._v(\"\\n      \"+_vm._s(props.row.head_family.address)+\"\\n    \")]}},{key:\"action\",fn:function(props){return [_c('vx-tooltip',{staticClass:\"text-center\",attrs:{\"text\":\"Edit Penduduk\"}},[_c('feather-icon',{attrs:{\"icon\":\"EditIcon\"},on:{\"click\":function($event){return _vm.editResident(props.row)}}})],1)]}},{key:\"expand-slot\",fn:function(props){return [_c('vs-table',{staticClass:\"text-dark\",attrs:{\"data\":props.row.resident},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar data = ref.data;\nreturn _vm._l((data),function(tr,indextr){return _c('vs-tr',{key:indextr},[_c('vs-td',[_vm._v(\"\\n              \"+_vm._s(indextr+1)+\"\\n            \")]),_c('vs-td',{attrs:{\"data\":tr.nik_id}},[_vm._v(\"\\n              \"+_vm._s(tr.nik_id)+\"\\n            \")]),_c('vs-td',{attrs:{\"data\":tr.name}},[_vm._v(\"\\n              \"+_vm._s(tr.name)+\"\\n            \")]),_c('vs-td',{attrs:{\"data\":tr.gender}},[_vm._v(\"\\n              \"+_vm._s(tr.gender)+\"\\n            \")]),_c('vs-td',{attrs:{\"data\":tr.birth_place}},[_vm._v(\"\\n              \"+_vm._s(tr.birth_place)+\"\\n            \")]),_c('vs-td',{attrs:{\"data\":tr.birth_date}},[_vm._v(\"\\n              \"+_vm._s(tr.birth_date)+\"\\n            \")]),_c('vs-td',{attrs:{\"data\":tr.occupation}},[_vm._v(\"\\n              \"+_vm._s(tr.occupation)+\"\\n            \")])],1)})}}],null,true)},[_c('template',{slot:\"thead\"},[_c('vs-th',[_vm._v(\"No\")]),_c('vs-th',[_vm._v(\"NIK\")]),_c('vs-th',[_vm._v(\"Nama Lengkap\")]),_c('vs-th',[_vm._v(\"Jenis Kelamin\")]),_c('vs-th',[_vm._v(\"Tempat Lahir\")]),_c('vs-th',[_vm._v(\"Tanggal Lahir\")]),_c('vs-th',[_vm._v(\"Pekerjaan\")])],1)],2)]}}])}),_c('vs-pagination',{staticClass:\"mt-5\",attrs:{\"total\":_vm.totalPages},model:{value:(_vm.currentPage),callback:function ($$v) {_vm.currentPage=$$v},expression:\"currentPage\"}}),_c('vs-prompt',{staticClass:\"export-options\",attrs:{\"title\":\"Export To Excel\",\"accept-text\":\"Export\",\"active\":_vm.activePrompt},on:{\"cancel\":_vm.clearFields,\"accept\":_vm.exportData,\"close\":_vm.clearFields,\"update:active\":function($event){_vm.activePrompt=$event}}},[_c('vs-input',{staticClass:\"w-full\",attrs:{\"placeholder\":\"Enter File Name..\"},model:{value:(_vm.fileName),callback:function ($$v) {_vm.fileName=$$v},expression:\"fileName\"}}),_c('v-select',{staticClass:\"my-4\",attrs:{\"options\":_vm.types},model:{value:(_vm.selectedType),callback:function ($$v) {_vm.selectedType=$$v},expression:\"selectedType\"}}),_c('v-select',{staticClass:\"my-4\",attrs:{\"options\":_vm.formats},model:{value:(_vm.selectedFormat),callback:function ($$v) {_vm.selectedFormat=$$v},expression:\"selectedFormat\"}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(false),expression:\"false\"}],attrs:{\"id\":\"printKK\"}},[_c('table',{staticClass:\"table\"},[_c('thead',{staticClass:\"thead-light\"},[_c('tr',_vm._l((_vm.headerTitleKK),function(data,index){return _c('th',{key:index,attrs:{\"scope\":\"col\"}},[_vm._v(\"\\n          \"+_vm._s(data)+\"\\n        \")])}),0)]),_c('tbody',_vm._l((_vm.kkArr),function(dataKK,indexKK){return _c('tr',{key:indexKK},_vm._l((dataKK),function(data,index){return _c('td',{key:index},[_vm._v(_vm._s(data))])}),0)}),0)])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(false),expression:\"false\"}],attrs:{\"id\":\"printSP\"}},[_c('table',{staticClass:\"table\"},[_c('thead',{staticClass:\"thead-light\"},[_c('tr',_vm._l((_vm.headerTitleSP),function(data,index){return _c('th',{key:index,attrs:{\"scope\":\"col\"}},[_vm._v(\"\\n          \"+_vm._s(data)+\"\\n        \")])}),0)]),_c('tbody',_vm._l((_vm.spArr),function(dataKK,indexKK){return _c('tr',{key:indexKK},_vm._l((dataKK),function(data,index){return _c('td',{key:index},[_vm._v(_vm._s(data))])}),0)}),0)])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div class=\"md:mt-2 md:float-left text-right\">\n      <vs-dropdown vs-trigger-click class=\"cursor-pointer sm:mr-3 mr-0 sm:mb-0 mb-3\">\n        <div class=\"p-4 border border-solid d-theme-border-grey-light rounded-full d-theme-dark-bg cursor-pointer flex items-center justify-between font-medium\">\n          <span class=\"mr-2\">{{ currentPage * paginationPageSize - (paginationPageSize - 1) }} - {{ table.meta.total_record - currentPage * paginationPageSize > 0 ? currentPage * paginationPageSize : table.meta.total_record }} of {{ table.meta.total_record }}</span>\n          <feather-icon icon=\"ChevronDownIcon\" svgClasses=\"h-4 w-4\" />\n        </div>\n        <vs-dropdown-menu>\n          <vs-dropdown-item @click=\"handlePerPage(5)\">\n            <span>5</span>\n          </vs-dropdown-item>\n          <vs-dropdown-item @click=\"handlePerPage(10)\">\n            <span>10</span>\n          </vs-dropdown-item>\n          <vs-dropdown-item @click=\"handlePerPage(25)\">\n            <span>25</span>\n          </vs-dropdown-item>\n          <vs-dropdown-item @click=\"handlePerPage(50)\">\n            <span>50</span>\n          </vs-dropdown-item>\n        </vs-dropdown-menu>\n      </vs-dropdown>\n\n      <vs-button to=\"/penduduk/tambah\" class=\"sm:mb-0 mb-3 sm:mr-2 mr-0\">Tambah Penduduk</vs-button>\n      <vs-button @click=\"openPrompt\" color=\"success\" class=\"sm:mb-0 mb-3 sm:mr-2 mr-0\">Export</vs-button>\n      <vs-button @click=\"printKK\" color=\"success\" class=\"sm:mb-0 mb-3 sm:mr-2 mr-0\">Print KK</vs-button>\n      <vs-button @click=\"printSP\" color=\"success\">Print Seluruh Penduduk</vs-button>\n    </div>\n\n    <vx-table search :table=\"table\" :max-items=\"table.meta.per_page\">\n      <template #no=\"props\">\n        {{ props.index }}\n      </template>\n      <template #head_family_nik=\"props\">\n        {{ props.row.head_family.head_family_nik }}\n      </template>\n      <template #name=\"props\">\n        {{ props.row.head_family.name }}\n      </template>\n      <template #address=\"props\">\n        {{ props.row.head_family.address }}\n      </template>\n      <template #action=\"props\">\n        <vx-tooltip text=\"Edit Penduduk\" class=\"text-center\">\n          <feather-icon @click=\"editResident(props.row)\" icon=\"EditIcon\"></feather-icon>\n        </vx-tooltip>\n      </template>\n\n      <template #expand-slot=\"props\">\n        <vs-table :data=\"props.row.resident\" class=\"text-dark\">\n          <template slot=\"thead\">\n            <vs-th>No</vs-th>\n            <vs-th>NIK</vs-th>\n            <vs-th>Nama Lengkap</vs-th>\n            <vs-th>Jenis Kelamin</vs-th>\n            <vs-th>Tempat Lahir</vs-th>\n            <vs-th>Tanggal Lahir</vs-th>\n            <vs-th>Pekerjaan</vs-th>\n          </template>\n\n          <template slot-scope=\"{data}\">\n            <vs-tr :key=\"indextr\" v-for=\"(tr, indextr) in data\" >\n              <vs-td>\n                {{ indextr+1 }}\n              </vs-td>\n              <vs-td :data=\"tr.nik_id\">\n                {{tr.nik_id}}\n              </vs-td>\n              <vs-td :data=\"tr.name\">\n                {{tr.name}}\n              </vs-td>\n              <vs-td :data=\"tr.gender\">\n                {{tr.gender}}\n              </vs-td>\n              <vs-td :data=\"tr.birth_place\">\n                {{tr.birth_place}}\n              </vs-td>\n              <vs-td :data=\"tr.birth_date\">\n                {{tr.birth_date}}\n              </vs-td>\n              <vs-td :data=\"tr.occupation\">\n                {{tr.occupation}}\n              </vs-td>\n            </vs-tr>\n          </template>\n        </vs-table>\n      </template>\n    </vx-table>\n    <vs-pagination\n        class=\"mt-5\"\n        :total=\"totalPages\"\n        v-model=\"currentPage\" />\n\n    <vs-prompt title=\"Export To Excel\" class=\"export-options\" @cancel=\"clearFields\" @accept=\"exportData\" accept-text=\"Export\" @close=\"clearFields\" :active.sync=\"activePrompt\">\n      <vs-input v-model=\"fileName\" placeholder=\"Enter File Name..\" class=\"w-full\" />\n      <v-select v-model=\"selectedType\" :options=\"types\" class=\"my-4\" />\n      <v-select v-model=\"selectedFormat\" :options=\"formats\" class=\"my-4\" />\n    </vs-prompt>\n    <div id=\"printKK\" v-show=\"false\">\n      <table class=\"table\">\n        <thead class=\"thead-light\">\n        <tr>\n          <th scope=\"col\" v-for=\"(data, index) in headerTitleKK\" :key=\"index\">\n            {{ data }}\n          </th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr v-for=\"(dataKK, indexKK) in kkArr\" :key=\"indexKK\">\n          <td v-for=\"(data, index) in dataKK\" :key=\"index\">{{ data }}</td>\n        </tr>\n        </tbody>\n      </table>\n    </div>\n    <div id=\"printSP\" v-show=\"false\">\n      <table class=\"table\">\n        <thead class=\"thead-light\">\n        <tr>\n          <th scope=\"col\" v-for=\"(data, index) in headerTitleSP\" :key=\"index\">\n            {{ data }}\n          </th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr v-for=\"(dataKK, indexKK) in spArr\" :key=\"indexKK\">\n          <td v-for=\"(data, index) in dataKK\" :key=\"index\">{{ data }}</td>\n        </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</template>\n\n<script>\n  import resident from \"@/http/resident\";\n  import {saveAs} from 'file-saver'\n  import xlsxHelper from \"../../../helper/xlsxHelper\";\n\n  export default {\n    name: \"Residents\",\n    data: () => ({\n      table: {\n        data: [],\n        columns: [\n          { key: 'no', label: 'No' },\n          { key: 'head_family_nik', label: 'NO KK' },\n          { key: 'name', label: 'Nama Kepala Keluarga' },\n          { key: 'address', label: 'Alamat' },\n          { key: 'action', label: 'Aksi' }\n        ],\n        meta: {},\n        page: 1,\n        perPage: 10\n      },\n      activePrompt: false,\n      dataExcel: [],\n      fileName: '',\n      formats: [\"xlsx\", \"csv\"],\n      selectedFormat: 'xlsx',\n      types: ['Kartu Keluarga', 'Seluruh Penduduk'],\n      selectedType: 'Kartu Keluarga',\n      cellAutoWidth: true,\n      headerTitleKK: ['NIK KK', 'Nama Kepala Keluarga', 'Alamat', 'Kelurahan', 'Kecamatan', 'Kota', 'Provinsi'],\n      headerValKK: ['head_family_nik', 'name', 'address', 'kelurahan', 'kecamatan', 'city', 'province'],\n      kkArr: [],\n      headerTitleSP: ['NIK', 'Nama', 'Alamat', 'Jenis Kelamin', 'Tempat Lahir', 'Tanggal Lahir', 'Agama', 'Pekerjaan'],\n      headerValSP: ['nik_id', 'name', 'address', 'gender', 'birth_place', 'birth_date', 'religion', 'occupation'],\n      spArr: [],\n      isFetchedPrintData: false\n    }),\n    computed: {\n      paginationPageSize() {\n        if(this.table.meta) return this.table.meta.per_page\n        else return 10\n      },\n      totalPages() {\n        if(this.table.meta) return Number(this.table.meta.last_page)\n        else return Number(0);\n      },\n      currentPage: {\n        get() {\n          if(this.table.meta) return this.table.meta.current_page\n          else return 1\n        },\n        set(val) {\n          this.table.page = val;\n          this.fetchResidents();\n        }\n      },\n    },\n    methods: {\n      fetchResidents() {\n        const params = `page=${this.table.page}&perPage=${this.table.perPage}`;\n        resident.index(params)\n          .then((res) => {\n            const { data } = res.data;\n            this.table.data = data.record;\n            this.table.meta = data.meta_pagination;\n\n            const params = `perPage=${this.table.meta.total_record}`;\n            resident.index(params)\n              .then(async (res) => {\n                const { data } = res.data;\n                this.dataExcel = data.record;\n                const list = this.dataExcel;\n                this.selectedType = 'Kartu Keluarga';\n                this.kkArr = await this.formatArray(this.headerValKK, list);\n                this.selectedType = 'Seluruh Penduduk';\n                this.spArr = await this.formatArray(this.headerValSP, list);\n                this.selectedType = 'Kartu Keluarga';\n                this.isFetchedPrintData = true;\n              }).catch((err) => {\n              throw new Error(err);\n            });\n          }).catch((err) => {\n          throw new Error(err);\n        });\n      },\n      fetchDataExcel() {\n        const params = `perPage=${this.table.meta.total_record}`;\n        this.$vs.loading();\n        resident.index(params)\n          .then((res) => {\n            const { data } = res.data;\n            this.dataExcel = data.record;\n            this.activePrompt = true;\n            this.$vs.loading.close();\n          }).catch((err) => {\n          throw new Error(err);\n        });\n      },\n      openPrompt() {\n        if(this.table.meta.hasOwnProperty('total_record')) {\n          this.fetchDataExcel();\n        } else {\n          this.$vs.notify({\n            title: 'Ekspor Data',\n            text: 'Mohon tunggu beberapa saat hingga datatables selesai load data!',\n            iconPack: 'feather',\n            icon: 'icon-alert-circle',\n            color: 'warning'\n          });\n        }\n      },\n      printKK() {\n        if(this.isFetchedPrintData) {\n          this.$htmlToPaper('printKK');\n        } else {\n          this.$vs.notify({\n            title: 'Ekspor Data',\n            text: 'Mohon tunggu beberapa saat hingga datatables selesai load data!',\n            iconPack: 'feather',\n            icon: 'icon-alert-circle',\n            color: 'warning'\n          });\n        }\n      },\n      printSP() {\n        if(this.isFetchedPrintData) {\n          this.$htmlToPaper('printSP');\n        } else {\n          this.$vs.notify({\n            title: 'Ekspor Data',\n            text: 'Mohon tunggu beberapa saat hingga datatables selesai load data!',\n            iconPack: 'feather',\n            icon: 'icon-alert-circle',\n            color: 'warning'\n          });\n        }\n      },\n      exportData() {\n        try {\n          const list = this.dataExcel;\n          const data = this.formatArray(this.selectedType === 'Kartu Keluarga' ? this.headerValKK : this.headerValSP, list);\n          const headData = this.selectedType === 'Kartu Keluarga' ? this.headerTitleKK : this.headerTitleSP;\n          if(this.selectedFormat === 'xlsx') {\n            const excel = xlsxHelper.exportExcel([headData], [data]);\n            saveAs(new Blob([excel],{type: \"application/octet-stream\"}), `${this.fileName}.xlsx`);\n\n          } else {\n            const csv = xlsxHelper.exportCsv([headData], [data]);\n            csv.map((obj, index) => {\n              saveAs(new Blob([obj],{type: \"application/octet-stream\"}), `${this.fileName}-sheet${index+1}.csv`)\n            })\n          }\n          this.clearFields();\n        } catch (e) {\n          console.log(e);\n        }\n      },\n      formatArray(filter, jsonData) {\n        if(this.selectedType === 'Kartu Keluarga') {\n          return jsonData.map(v => filter.map(j => {\n            return v.head_family[j];\n          }))\n        } else {\n          let data = [];\n          jsonData.map(v => {\n            v.resident.map(r => {\n              data.push(r);\n            })\n          });\n          return data.map(d => filter.map(j => {\n            return d[j];\n          }))\n        }\n      },\n      clearFields() {\n        this.fileName = '';\n        this.cellAutoWidth = true;\n        this.selectedFormat = 'xlsx';\n        this.selectedType = 'Kartu Keluarga';\n      },\n      handlePerPage(perPage) {\n        this.table.perPage = perPage;\n        this.fetchResidents();\n      },\n      editResident(data) {\n        this.$router.push(`/penduduk/edit/${data.head_family.id}`);\n      }\n    },\n    created() {\n      this.fetchResidents();\n    }\n  }\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=7c0ecb2c&scoped=true&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7c0ecb2c\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}