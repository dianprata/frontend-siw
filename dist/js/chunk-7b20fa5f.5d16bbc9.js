(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7b20fa5f"],{"5b8d":function(e,t,a){"use strict";var n=a("74f4");t["a"]={index:function(e){return n["a"].get("/api/head-family?".concat(e))},show:function(e){return n["a"].get("/api/head-family/".concat(e))},store:function(e){return n["a"].post("/api/head-family/store",e)},edit:function(e){return n["a"].put("/api/head-family/update",e)}}},e9e4:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"md:mt-2 md:float-left text-right"},[a("vs-dropdown",{staticClass:"cursor-pointer sm:mr-3 mr-0 sm:mb-0 mb-3",attrs:{"vs-trigger-click":""}},[a("div",{staticClass:"p-4 border border-solid d-theme-border-grey-light rounded-full d-theme-dark-bg cursor-pointer flex items-center justify-between font-medium"},[a("span",{staticClass:"mr-2"},[e._v(e._s(e.currentPage*e.paginationPageSize-(e.paginationPageSize-1))+" - "+e._s(e.table.meta.total_record-e.currentPage*e.paginationPageSize>0?e.currentPage*e.paginationPageSize:e.table.meta.total_record)+" of "+e._s(e.table.meta.total_record))]),a("feather-icon",{attrs:{icon:"ChevronDownIcon",svgClasses:"h-4 w-4"}})],1),a("vs-dropdown-menu",[a("vs-dropdown-item",{on:{click:function(t){return e.handlePerPage(5)}}},[a("span",[e._v("5")])]),a("vs-dropdown-item",{on:{click:function(t){return e.handlePerPage(10)}}},[a("span",[e._v("10")])]),a("vs-dropdown-item",{on:{click:function(t){return e.handlePerPage(25)}}},[a("span",[e._v("25")])]),a("vs-dropdown-item",{on:{click:function(t){return e.handlePerPage(50)}}},[a("span",[e._v("50")])])],1)],1),a("vs-button",{staticClass:"sm:mb-0 mb-3 sm:mr-2 mr-0",attrs:{to:"/penduduk/tambah"}},[e._v("Tambah Penduduk")]),a("vs-button",{attrs:{color:"success"},on:{click:e.openPrompt}},[e._v("Export")])],1),a("vx-table",{attrs:{search:"",table:e.table,"max-items":e.table.meta.per_page},scopedSlots:e._u([{key:"no",fn:function(t){return[e._v("\n      "+e._s(t.index)+"\n    ")]}},{key:"head_family_nik",fn:function(t){return[e._v("\n      "+e._s(t.row.head_family.head_family_nik)+"\n    ")]}},{key:"name",fn:function(t){return[e._v("\n      "+e._s(t.row.head_family.name)+"\n    ")]}},{key:"address",fn:function(t){return[e._v("\n      "+e._s(t.row.head_family.address)+"\n    ")]}},{key:"action",fn:function(t){return[a("vx-tooltip",{staticClass:"text-center",attrs:{text:"Edit Penduduk"}},[a("feather-icon",{attrs:{icon:"EditIcon"},on:{click:function(a){return e.editResident(t.row)}}})],1)]}},{key:"expand-slot",fn:function(t){return[a("vs-table",{staticClass:"text-dark",attrs:{data:t.row.resident},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.data;return e._l(n,(function(t,n){return a("vs-tr",{key:n},[a("vs-td",[e._v("\n              "+e._s(n+1)+"\n            ")]),a("vs-td",{attrs:{data:t.nik_id}},[e._v("\n              "+e._s(t.nik_id)+"\n            ")]),a("vs-td",{attrs:{data:t.name}},[e._v("\n              "+e._s(t.name)+"\n            ")]),a("vs-td",{attrs:{data:t.gender}},[e._v("\n              "+e._s(t.gender)+"\n            ")]),a("vs-td",{attrs:{data:t.birth_place}},[e._v("\n              "+e._s(t.birth_place)+"\n            ")]),a("vs-td",{attrs:{data:t.birth_date}},[e._v("\n              "+e._s(t.birth_date)+"\n            ")]),a("vs-td",{attrs:{data:t.occupation}},[e._v("\n              "+e._s(t.occupation)+"\n            ")])],1)}))}}],null,!0)},[a("template",{slot:"thead"},[a("vs-th",[e._v("No")]),a("vs-th",[e._v("NIK")]),a("vs-th",[e._v("Nama Lengkap")]),a("vs-th",[e._v("Jenis Kelamin")]),a("vs-th",[e._v("Tempat Lahir")]),a("vs-th",[e._v("Tanggal Lahir")]),a("vs-th",[e._v("Pekerjaan")])],1)],2)]}}])}),a("vs-pagination",{staticClass:"mt-5",attrs:{total:e.totalPages},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}}),a("vs-prompt",{staticClass:"export-options",attrs:{title:"Export To Excel","accept-text":"Export",active:e.activePrompt},on:{cancel:e.clearFields,accept:e.exportData,close:e.clearFields,"update:active":function(t){e.activePrompt=t}}},[a("vs-input",{staticClass:"w-full",attrs:{placeholder:"Enter File Name.."},model:{value:e.fileName,callback:function(t){e.fileName=t},expression:"fileName"}}),a("v-select",{staticClass:"my-4",attrs:{options:e.types},model:{value:e.selectedType,callback:function(t){e.selectedType=t},expression:"selectedType"}}),a("v-select",{staticClass:"my-4",attrs:{options:e.formats},model:{value:e.selectedFormat,callback:function(t){e.selectedFormat=t},expression:"selectedFormat"}})],1)],1)},r=[],s=(a("c5f6"),a("5b8d")),i=a("21a6"),o=a("252a"),c={name:"Residents",data:function(){return{table:{data:[],columns:[{key:"no",label:"No"},{key:"head_family_nik",label:"NO KK"},{key:"name",label:"Nama Kepala Keluarga"},{key:"address",label:"Alamat"},{key:"action",label:"Aksi"}],meta:{},page:1,perPage:10},activePrompt:!1,dataExcel:[],fileName:"",formats:["xlsx","csv"],selectedFormat:"xlsx",types:["Kartu Keluarga","Seluruh Penduduk"],selectedType:"Kartu Keluarga",cellAutoWidth:!0,headerTitleKK:["NIK KK","Nama Kepala Keluarga","Alamat","Kelurahan","Kecamatan","Kota","Provinsi"],headerValKK:["head_family_nik","name","address","kelurahan","kecamatan","city","province"],headerTitleSP:["NIK","Nama","Alamat","Jenis Kelamin","Tempat Lahir","Tanggal Lahir","Agama","Pekerjaan"],headerValSP:["nik_id","name","address","gender","birth_place","birth_date","religion","occupation"]}},computed:{paginationPageSize:function(){return this.table.meta?this.table.meta.per_page:10},totalPages:function(){return this.table.meta?Number(this.table.meta.last_page):Number(0)},currentPage:{get:function(){return this.table.meta?this.table.meta.current_page:1},set:function(e){this.table.page=e,this.fetchResidents()}}},methods:{fetchResidents:function(){var e=this,t="page=".concat(this.table.page,"&perPage=").concat(this.table.perPage);s["a"].index(t).then((function(t){var a=t.data.data;e.table.data=a.record,e.table.meta=a.meta_pagination})).catch((function(e){throw new Error(e)}))},fetchDataExcel:function(){var e=this,t="perPage=".concat(this.table.meta.total_record);this.$vs.loading(),s["a"].index(t).then((function(t){var a=t.data.data;e.dataExcel=a.record,e.activePrompt=!0,e.$vs.loading.close()})).catch((function(e){throw new Error(e)}))},openPrompt:function(){this.table.meta&&this.fetchDataExcel()},exportData:function(){var e=this,t=this.dataExcel,a=this.formatJson("Kartu Keluarga"===this.selectedType?this.headerValKK:this.headerValSP,t),n="Kartu Keluarga"===this.selectedType?this.headerTitleKK:this.headerTitleSP;if("xlsx"===this.selectedFormat){var r=o["a"].exportExcel([n],[a]);Object(i["saveAs"])(new Blob([r],{type:"application/octet-stream"}),"".concat(this.fileName,".xlsx"))}else{var s=o["a"].exportCsv([n],[a]);s.map((function(t,a){Object(i["saveAs"])(new Blob([t],{type:"application/octet-stream"}),"".concat(e.fileName,"-sheet").concat(a+1,".csv"))}))}},formatJson:function(e,t){if("Kartu Keluarga"===this.selectedType)return t.map((function(t){return e.map((function(e){return t.head_family[e]}))}));var a=[];return t.map((function(e){e.resident.map((function(e){a.push(e)}))})),a.map((function(t){return e.map((function(e){return t[e]}))}))},clearFields:function(){this.fileName="",this.cellAutoWidth=!0,this.selectedFormat="xlsx",this.selectedType="Kartu Keluarga"},handlePerPage:function(e){this.table.perPage=e,this.fetchResidents()},editResident:function(e){this.$router.push("/penduduk/edit/".concat(e.head_family.id))}},created:function(){this.fetchResidents()}},l=c,d=a("2877"),u=Object(d["a"])(l,n,r,!1,null,"21d2466e",null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-7b20fa5f.5d16bbc9.js.map