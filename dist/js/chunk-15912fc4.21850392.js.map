{"version":3,"sources":["webpack:///./src/http/complaint.js","webpack:///./src/views/admin/ComplaintAdmin.vue?c002","webpack:///src/views/admin/ComplaintAdmin.vue","webpack:///./src/views/admin/ComplaintAdmin.vue?b75e","webpack:///./src/views/admin/ComplaintAdmin.vue"],"names":["index","params","axios","get","markIsPending","id","put","markIsRead","markIsAcc","store","payload","post","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","_s","currentPage","paginationPageSize","table","meta","total_record","on","$event","handlePerPage","openPrompt","per_page","scopedSlots","_u","key","fn","props","_f","row","type","resident","name","created_at","class","status","changeStatus","body","totalPages","model","value","callback","$$v","expression","activePrompt","clearFields","exportData","fileName","types","selectedType","formats","selectedFormat","staticRenderFns","component"],"mappings":"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","file":"js/chunk-15912fc4.21850392.js","sourcesContent":["import axios from \"./axios\";\n\nexport default {\n  index(params) {\n    return axios.get(`/api/complaint?${params}`);\n  },\n  markIsPending(id) {\n    return axios.put(`/api/complaint/mark-is-pending/${id}`);\n  },\n  markIsRead(id) {\n    return axios.put(`/api/complaint/mark-is-read/${id}`);\n  },\n  markIsAcc(id) {\n    return axios.put(`/api/complaint/mark-is-acc/${id}`);\n  },\n  store(payload) {\n    return axios.post('/api/complaint/store', payload);\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"sm:mt-2 sm:float-left text-right\"},[_c('vs-dropdown',{staticClass:\"cursor-pointer\",attrs:{\"vs-trigger-click\":\"\"}},[_c('div',{staticClass:\"p-4 border border-solid d-theme-border-grey-light rounded-full d-theme-dark-bg cursor-pointer flex items-center justify-between font-medium\"},[_c('span',{staticClass:\"mr-2\"},[_vm._v(_vm._s(_vm.currentPage * _vm.paginationPageSize - (_vm.paginationPageSize - 1))+\" - \"+_vm._s(_vm.table.meta.total_record - _vm.currentPage * _vm.paginationPageSize > 0 ? _vm.currentPage * _vm.paginationPageSize : _vm.table.meta.total_record)+\" of \"+_vm._s(_vm.table.meta.total_record))]),_c('feather-icon',{attrs:{\"icon\":\"ChevronDownIcon\",\"svgClasses\":\"h-4 w-4\"}})],1),_c('vs-dropdown-menu',[_c('vs-dropdown-item',{on:{\"click\":function($event){return _vm.handlePerPage(5)}}},[_c('span',[_vm._v(\"5\")])]),_c('vs-dropdown-item',{on:{\"click\":function($event){return _vm.handlePerPage(10)}}},[_c('span',[_vm._v(\"10\")])]),_c('vs-dropdown-item',{on:{\"click\":function($event){return _vm.handlePerPage(25)}}},[_c('span',[_vm._v(\"25\")])]),_c('vs-dropdown-item',{on:{\"click\":function($event){return _vm.handlePerPage(50)}}},[_c('span',[_vm._v(\"50\")])])],1)],1),_c('vs-button',{staticClass:\"sm:mb-0 mb-3 sm:ml-2 ml-0\",attrs:{\"color\":\"success\"},on:{\"click\":_vm.openPrompt}},[_vm._v(\"Export\")])],1),_c('vx-table',{attrs:{\"search\":\"\",\"table\":_vm.table,\"max-items\":_vm.table.meta.per_page},scopedSlots:_vm._u([{key:\"no\",fn:function(props){return [_vm._v(\"\\n      \"+_vm._s(props.index)+\"\\n    \")]}},{key:\"type\",fn:function(props){return [_vm._v(\"\\n      \"+_vm._s(_vm._f(\"capitalize\")(props.row.type))+\"\\n    \")]}},{key:\"residentName\",fn:function(props){return [_vm._v(\"\\n      \"+_vm._s(props.row.resident.name)+\"\\n    \")]}},{key:\"created_at\",fn:function(props){return [_vm._v(\"\\n      \"+_vm._s(_vm._f(\"date_filter\")(props.row.created_at))+\"\\n    \")]}},{key:\"status\",fn:function(props){return [_c('p',{staticClass:\"text-center py-2 text-white\",class:props.row.status === 'acc' ? 'bg-success' : props.row.status === 'pending' ? 'bg-warning' : 'bg-danger'},[_vm._v(\"\\n        \"+_vm._s(_vm._f(\"filterStatus\")(props.row.status))+\"\\n      \")])]}},{key:\"aksi\",fn:function(props){return [_c('div',{staticClass:\"flex justify-between\"},[_c('vx-tooltip',{staticClass:\"text-center\",attrs:{\"text\":\"Tunda Pegaduan\"}},[_c('feather-icon',{staticClass:\"text-warning\",attrs:{\"icon\":\"AlertCircleIcon\"},on:{\"click\":function($event){return _vm.changeStatus(props.row, 'pending')}}})],1),_c('vx-tooltip',{staticClass:\"text-center\",attrs:{\"text\":\"Terima Pengaduan\"}},[_c('feather-icon',{staticClass:\"text-success\",attrs:{\"icon\":\"CheckIcon\"},on:{\"click\":function($event){return _vm.changeStatus(props.row, 'acc')}}})],1),_c('vx-tooltip',{staticClass:\"text-center\",attrs:{\"text\":\"Tolak Pengaduan\"}},[_c('feather-icon',{staticClass:\"text-danger\",attrs:{\"icon\":\"XIcon\"},on:{\"click\":function($event){return _vm.changeStatus(props.row, 'read')}}})],1)],1)]}},{key:\"expand-slot\",fn:function(props){return [_c('div',[_c('h6',{staticClass:\"mb-3 font-bold text-white\"},[_vm._v(\"Isi :\")]),_c('p',[_vm._v(_vm._s(props.row.body))])])]}}])}),_c('vs-pagination',{staticClass:\"mt-5\",attrs:{\"total\":_vm.totalPages},model:{value:(_vm.currentPage),callback:function ($$v) {_vm.currentPage=$$v},expression:\"currentPage\"}}),_c('vs-prompt',{staticClass:\"export-options\",attrs:{\"title\":\"Export To Excel\",\"accept-text\":\"Export\",\"active\":_vm.activePrompt},on:{\"cancel\":_vm.clearFields,\"accept\":_vm.exportData,\"close\":_vm.clearFields,\"update:active\":function($event){_vm.activePrompt=$event}}},[_c('vs-input',{staticClass:\"w-full\",attrs:{\"placeholder\":\"Enter File Name..\"},model:{value:(_vm.fileName),callback:function ($$v) {_vm.fileName=$$v},expression:\"fileName\"}}),_c('v-select',{staticClass:\"my-4\",attrs:{\"options\":_vm.types},model:{value:(_vm.selectedType),callback:function ($$v) {_vm.selectedType=$$v},expression:\"selectedType\"}}),_c('v-select',{staticClass:\"my-4\",attrs:{\"options\":_vm.formats},model:{value:(_vm.selectedFormat),callback:function ($$v) {_vm.selectedFormat=$$v},expression:\"selectedFormat\"}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div class=\"sm:mt-2 sm:float-left text-right\">\n      <vs-dropdown vs-trigger-click class=\"cursor-pointer\">\n        <div class=\"p-4 border border-solid d-theme-border-grey-light rounded-full d-theme-dark-bg cursor-pointer flex items-center justify-between font-medium\">\n          <span class=\"mr-2\">{{ currentPage * paginationPageSize - (paginationPageSize - 1) }} - {{ table.meta.total_record - currentPage * paginationPageSize > 0 ? currentPage * paginationPageSize : table.meta.total_record }} of {{ table.meta.total_record }}</span>\n          <feather-icon icon=\"ChevronDownIcon\" svgClasses=\"h-4 w-4\" />\n        </div>\n        <vs-dropdown-menu>\n          <vs-dropdown-item @click=\"handlePerPage(5)\">\n            <span>5</span>\n          </vs-dropdown-item>\n          <vs-dropdown-item @click=\"handlePerPage(10)\">\n            <span>10</span>\n          </vs-dropdown-item>\n          <vs-dropdown-item @click=\"handlePerPage(25)\">\n            <span>25</span>\n          </vs-dropdown-item>\n          <vs-dropdown-item @click=\"handlePerPage(50)\">\n            <span>50</span>\n          </vs-dropdown-item>\n        </vs-dropdown-menu>\n      </vs-dropdown>\n\n      <vs-button class=\"sm:mb-0 mb-3 sm:ml-2 ml-0\" @click=\"openPrompt\" color=\"success\">Export</vs-button>\n    </div>\n\n    <vx-table search :table=\"table\" :max-items=\"table.meta.per_page\">\n      <template v-slot:no=\"props\">\n        {{ props.index }}\n      </template>\n      <template v-slot:type=\"props\">\n        {{ props.row.type | capitalize }}\n      </template>\n      <template v-slot:residentName=\"props\">\n        {{ props.row.resident.name }}\n      </template>\n      <template v-slot:created_at=\"props\">\n        {{ props.row.created_at | date_filter }}\n      </template>\n      <template v-slot:status=\"props\">\n        <p class=\"text-center py-2 text-white\" :class=\"props.row.status === 'acc' ? 'bg-success' : props.row.status === 'pending' ? 'bg-warning' : 'bg-danger'\">\n          {{ props.row.status | filterStatus }}\n        </p>\n      </template>\n      <template v-slot:aksi=\"props\">\n        <div class=\"flex justify-between\">\n          <vx-tooltip text=\"Tunda Pegaduan\"\n                      class=\"text-center\">\n            <feather-icon @click=\"changeStatus(props.row, 'pending')\" icon=\"AlertCircleIcon\" class=\"text-warning\"></feather-icon>\n          </vx-tooltip>\n          <vx-tooltip text=\"Terima Pengaduan\"\n                      class=\"text-center\">\n            <feather-icon @click=\"changeStatus(props.row, 'acc')\" icon=\"CheckIcon\" class=\"text-success\"></feather-icon>\n          </vx-tooltip>\n          <vx-tooltip text=\"Tolak Pengaduan\"\n                      class=\"text-center\">\n            <feather-icon @click=\"changeStatus(props.row, 'read')\" icon=\"XIcon\" class=\"text-danger\"></feather-icon>\n          </vx-tooltip>\n        </div>\n      </template>\n      <template v-slot:expand-slot=\"props\">\n        <div>\n          <h6 class=\"mb-3 font-bold text-white\">Isi :</h6>\n          <p>{{ props.row.body }}</p>\n        </div>\n      </template>\n    </vx-table>\n    <vs-pagination\n        class=\"mt-5\"\n        :total=\"totalPages\"\n        v-model=\"currentPage\" />\n    <vs-prompt title=\"Export To Excel\" class=\"export-options\" @cancel=\"clearFields\" @accept=\"exportData\" accept-text=\"Export\" @close=\"clearFields\" :active.sync=\"activePrompt\">\n      <vs-input v-model=\"fileName\" placeholder=\"Enter File Name..\" class=\"w-full\" />\n      <v-select v-model=\"selectedType\" :options=\"types\" class=\"my-4\" />\n      <v-select v-model=\"selectedFormat\" :options=\"formats\" class=\"my-4\" />\n    </vs-prompt>\n  </div>\n</template>\n\n<script>\n  import complaint from \"../../http/complaint\";\n  import xlsxHelper from \"../../helper/xlsxHelper\";\n  import {saveAs} from \"file-saver\";\n  import moment from 'moment';\n\n  export default {\n    name: \"ComplaintAdmin\",\n    filters: {\n      filterStatus(value) {\n        if(value === 'pending') {\n          return 'Ditunda';\n        } else if(value === 'acc') {\n          return 'Diterima';\n        } else {\n          return 'Ditolak';\n        }\n      }\n    },\n    data() {\n      return {\n        table: {\n          data: [],\n          columns: [\n            { key: 'no', label: 'No' },\n            { key: 'type', label: 'Tipe' },\n            { key: 'residentName', sortKey: 'resident.name', label: 'Pengirim' },\n            { key: 'status', label: 'Status' },\n            { key: 'created_at', label: 'Tanggal Pengaduan' },\n            { key: 'aksi' }\n          ],\n          meta: {},\n          page: 1,\n          perPage: 10\n        },\n        activePrompt: false,\n        dataExcel: [],\n        fileName: '',\n        formats: [\"xlsx\", \"csv\"],\n        selectedFormat: 'xlsx',\n        types: ['Pengaduan Warga'],\n        selectedType: 'Pengaduan Warga',\n        cellAutoWidth: true,\n        headerTitleComplaint: ['Pengirim', 'Tipe', 'Isi', 'Status', 'Tanggal Pengaduan'],\n      }\n    },\n    computed: {\n      paginationPageSize() {\n        if(this.table.meta) return this.table.meta.per_page\n        else return 10\n      },\n      totalPages() {\n        if(this.table.meta) return Number(this.table.meta.last_page)\n        else return Number(0);\n      },\n      currentPage: {\n        get() {\n          if(this.table.meta) return this.table.meta.current_page\n          else return 1\n        },\n        set(val) {\n          this.table.page = val;\n          this.fetchComplaint();\n        }\n      }\n    },\n    methods: {\n      fetchDataExcel() {\n        const params = `perPage=${this.table.meta.total_record}`;\n        this.$vs.loading();\n        complaint.index(params)\n          .then((res) => {\n            const { data } = res.data;\n            this.dataExcel = data.record;\n            this.activePrompt = true;\n            this.$vs.loading.close();\n          }).catch((err) => {\n          throw new Error(err);\n        });\n      },\n      openPrompt() {\n        if(this.table.meta.hasOwnProperty('total_record')) {\n          this.fetchDataExcel();\n        } else {\n          this.$vs.notify({\n            title: 'Ekspor Data',\n            text: 'Mohon tunggu beberapa saat hingga datatables selesai load data!',\n            iconPack: 'feather',\n            icon: 'icon-alert-circle',\n            color: 'warning'\n          });\n        }\n      },\n      clearFields() {\n        this.fileName = '';\n        this.cellAutoWidth = true;\n        this.selectedFormat = 'xlsx';\n        this.selectedType = 'Pengaduan Warga';\n      },\n      exportData() {\n        try {\n          const list = this.dataExcel;\n          const data = this.formatArray(list);\n          const headData = this.headerTitleComplaint;\n          if(this.selectedFormat === 'xlsx') {\n            const excel = xlsxHelper.exportExcel([headData], [data]);\n            saveAs(new Blob([excel],{type: \"application/octet-stream\"}), `${this.fileName}.xlsx`);\n\n          } else {\n            const csv = xlsxHelper.exportCsv([headData], [data]);\n            csv.map((obj, index) => {\n              saveAs(new Blob([obj],{type: \"application/octet-stream\"}), `${this.fileName}-sheet${index+1}.csv`)\n            })\n          }\n          this.clearFields();\n        } catch (e) {\n          console.log(e);\n        }\n      },\n      formatArray(jsonData) {\n        moment.locale('id');\n        return jsonData.map((obj) => {\n          return [\n            obj.resident.name,\n            obj.type,\n            obj.body,\n            obj.status,\n            moment(obj.created_at).format('ddd, DD-MM-YYYY hh:mm')\n          ]\n        })\n      },\n      fetchComplaint() {\n        const params = `page=${this.table.page}&perPage=${this.table.perPage}`;\n        complaint.index(params)\n          .then((res) => {\n            const { data } = res.data;\n            if(data) {\n              this.table.data = data.record;\n              this.table.meta = data.meta_pagination;\n            }\n          }).catch((err) => {\n          throw new Error(err);\n        });\n      },\n      changeStatus(data, status) {\n        if(status === 'pending') {\n          complaint.markIsPending(data.id)\n            .then(() => {\n              this.$vs.notify({\n                title: 'Berhasil!',\n                text: '',\n                iconPack: 'feather',\n                icon: 'icon-check-circle',\n                color: 'primary'\n              });\n              this.fetchComplaint();\n            }).catch((err) => {\n            throw new Error(err);\n          })\n        } else if(status === 'acc') {\n          complaint.markIsAcc(data.id)\n            .then(() => {\n              this.$vs.notify({\n                title: 'Berhasil!',\n                text: '',\n                iconPack: 'feather',\n                icon: 'icon-check-circle',\n                color: 'primary'\n              });\n              this.fetchComplaint();\n            }).catch((err) => {\n            throw new Error(err);\n          })\n        } else {\n          complaint.markIsRead(data.id)\n            .then(() => {\n              this.$vs.notify({\n                title: 'Berhasil!',\n                text: '',\n                iconPack: 'feather',\n                icon: 'icon-check-circle',\n                color: 'primary'\n              });\n              this.fetchComplaint();\n            }).catch((err) => {\n            throw new Error(err);\n          })\n        }\n      },\n      handlePerPage(perPage) {\n        this.table.perPage = perPage;\n        this.fetchComplaint();\n      },\n    },\n    created() {\n      this.fetchComplaint();\n    }\n  }\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComplaintAdmin.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComplaintAdmin.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ComplaintAdmin.vue?vue&type=template&id=47a6a95b&scoped=true&\"\nimport script from \"./ComplaintAdmin.vue?vue&type=script&lang=js&\"\nexport * from \"./ComplaintAdmin.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"47a6a95b\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}