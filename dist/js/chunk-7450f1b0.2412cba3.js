(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7450f1b0"],{"01e0":function(e,t,a){"use strict";var n=a("74f4");t["a"]={index:function(e){return n["a"].get("/api/complaint?".concat(e))},markAsResolved:function(e){return n["a"].put("/api/complaint/mark-is-resolved/".concat(e))},store:function(e){return n["a"].post("/api/complaint/store",e)}}},"74f4":function(e,t,a){"use strict";var n=a("bb36");t["a"]=n["a"]},f612:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"sm:mt-2 sm:float-left text-right"},[a("vs-dropdown",{staticClass:"cursor-pointer",attrs:{"vs-trigger-click":""}},[a("div",{staticClass:"p-4 border border-solid d-theme-border-grey-light rounded-full d-theme-dark-bg cursor-pointer flex items-center justify-between font-medium"},[a("span",{staticClass:"mr-2"},[e._v(e._s(e.currentPage*e.paginationPageSize-(e.paginationPageSize-1))+" - "+e._s(e.table.meta.total_record-e.currentPage*e.paginationPageSize>0?e.currentPage*e.paginationPageSize:e.table.meta.total_record)+" of "+e._s(e.table.meta.total_record))]),a("feather-icon",{attrs:{icon:"ChevronDownIcon",svgClasses:"h-4 w-4"}})],1),a("vs-dropdown-menu",[a("vs-dropdown-item",{on:{click:function(t){return e.handlePerPage(5)}}},[a("span",[e._v("5")])]),a("vs-dropdown-item",{on:{click:function(t){return e.handlePerPage(10)}}},[a("span",[e._v("10")])]),a("vs-dropdown-item",{on:{click:function(t){return e.handlePerPage(25)}}},[a("span",[e._v("25")])]),a("vs-dropdown-item",{on:{click:function(t){return e.handlePerPage(50)}}},[a("span",[e._v("50")])])],1)],1)],1),a("vx-table",{attrs:{search:"",table:e.table,"max-items":e.table.meta.per_page},scopedSlots:e._u([{key:"no",fn:function(t){return[e._v("\n      "+e._s(t.index)+"\n    ")]}},{key:"type",fn:function(t){return[e._v("\n      "+e._s(e._f("capitalize")(t.row.type))+"\n    ")]}},{key:"residentName",fn:function(t){return[e._v("\n      "+e._s(t.row.resident.name)+"\n    ")]}},{key:"created_at",fn:function(t){return[e._v("\n      "+e._s(e._f("date_filter")(t.row.created_at))+"\n    ")]}},{key:"aksi",fn:function(t){return[0===t.row.is_resolved?a("vx-tooltip",{staticClass:"text-center",attrs:{text:"Tandai sudah terselesaikan"}},[a("feather-icon",{attrs:{icon:"CheckCircleIcon"},on:{click:function(a){return e.markAsResolved(t.row)}}})],1):e._e()]}},{key:"expand-slot",fn:function(t){return[a("div",[a("h6",{staticClass:"mb-3 font-bold text-white"},[e._v("Isi :")]),a("p",[e._v(e._s(t.row.body))])])]}}])}),a("vs-pagination",{staticClass:"mt-5",attrs:{total:e.totalPages},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)},r=[],i=(a("c5f6"),a("01e0")),o={name:"ComplaintAdmin",data:function(){return{table:{data:[],columns:[{key:"no",label:"No"},{key:"type",label:"Tipe"},{key:"residentName",sortKey:"resident.name",label:"Pengirim"},{key:"created_at",label:"Tanggal Pengaduan"},{key:"aksi"}],meta:{},page:1,perPage:10}}},computed:{paginationPageSize:function(){return this.table.meta?this.table.meta.per_page:10},totalPages:function(){return this.table.meta?Number(this.table.meta.last_page):Number(0)},currentPage:{get:function(){return this.table.meta?this.table.meta.current_page:1},set:function(e){this.table.page=e,this.fetchComplaint()}}},methods:{fetchComplaint:function(){var e=this,t="page=".concat(this.table.page,"&perPage=").concat(this.table.perPage);i["a"].index(t).then((function(t){var a=t.data.data;a&&(e.table.data=a.record,e.table.meta=a.meta_pagination)})).catch((function(e){throw new Error(e)}))},markAsResolved:function(e){var t=this;0===e.is_resolved&&i["a"].markAsResolved(e.id).then((function(){t.$vs.notify({title:"Berhasil!",text:"",iconPack:"feather",icon:"icon-check-circle",color:"primary"}),t.fetchComplaint()})).catch((function(e){throw new Error(e)}))},handlePerPage:function(e){this.table.perPage=e,this.fetchComplaint()}},created:function(){this.fetchComplaint()}},s=o,c=a("2877"),l=Object(c["a"])(s,n,r,!1,null,"589500b7",null);t["default"]=l.exports}}]);
//# sourceMappingURL=chunk-7450f1b0.2412cba3.js.map