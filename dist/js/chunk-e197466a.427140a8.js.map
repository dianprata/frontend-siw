{"version":3,"sources":["webpack:///./src/http/axios/index.js","webpack:///./src/http/announcement.js","webpack:///./src/views/admin/Announcement.vue?46ac","webpack:///src/views/admin/Announcement.vue","webpack:///./src/views/admin/Announcement.vue?8ecb","webpack:///./src/views/admin/Announcement.vue"],"names":["axios","index","params","get","markNotActive","id","put","store","payload","post","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","_s","currentPage","paginationPageSize","table","meta","total_record","on","$event","handlePerPage","activePrompt","per_page","scopedSlots","_u","key","fn","props","_f","row","type","resident","name","created_at","body","totalPages","model","value","callback","$$v","expression","validateForm","reset","sendAnnouncement","title","staticRenderFns","component"],"mappings":"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","file":"js/chunk-e197466a.427140a8.js","sourcesContent":["import axios from \"../../axios\";\n\nexport default axios;\n","import axios from \"./axios\";\n\nexport default {\n  index(params) {\n    return axios.get(`/api/announcement?${params}`);\n  },\n  markNotActive(id) {\n    return axios.put(`/api/announcement/mark-not-active/${id}`);\n  },\n  store(payload) {\n    return axios.post('/api/announcement/store', payload);\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"md:mt-2 md:float-left text-right\"},[_c('vs-dropdown',{staticClass:\"cursor-pointer sm:mr-3 mr-0 sm:mb-0 mb-3\",attrs:{\"vs-trigger-click\":\"\"}},[_c('div',{staticClass:\"p-4 border border-solid d-theme-border-grey-light rounded-full d-theme-dark-bg cursor-pointer flex items-center justify-between font-medium\"},[_c('span',{staticClass:\"mr-2\"},[_vm._v(_vm._s(_vm.currentPage * _vm.paginationPageSize - (_vm.paginationPageSize - 1))+\" - \"+_vm._s(_vm.table.meta.total_record - _vm.currentPage * _vm.paginationPageSize > 0 ? _vm.currentPage * _vm.paginationPageSize : _vm.table.meta.total_record)+\" of \"+_vm._s(_vm.table.meta.total_record))]),_c('feather-icon',{attrs:{\"icon\":\"ChevronDownIcon\",\"svgClasses\":\"h-4 w-4\"}})],1),_c('vs-dropdown-menu',[_c('vs-dropdown-item',{on:{\"click\":function($event){return _vm.handlePerPage(5)}}},[_c('span',[_vm._v(\"5\")])]),_c('vs-dropdown-item',{on:{\"click\":function($event){return _vm.handlePerPage(10)}}},[_c('span',[_vm._v(\"10\")])]),_c('vs-dropdown-item',{on:{\"click\":function($event){return _vm.handlePerPage(25)}}},[_c('span',[_vm._v(\"25\")])]),_c('vs-dropdown-item',{on:{\"click\":function($event){return _vm.handlePerPage(50)}}},[_c('span',[_vm._v(\"50\")])])],1)],1),_c('vs-button',{on:{\"click\":function($event){_vm.activePrompt = !_vm.activePrompt}}},[_vm._v(\"Tambah Pengumuman\")])],1),_c('vx-table',{attrs:{\"search\":\"\",\"table\":_vm.table,\"max-items\":_vm.table.meta.per_page},scopedSlots:_vm._u([{key:\"no\",fn:function(props){return [_vm._v(\"\\n      \"+_vm._s(props.index)+\"\\n    \")]}},{key:\"type\",fn:function(props){return [_vm._v(\"\\n      \"+_vm._s(_vm._f(\"capitalize\")(props.row.type))+\"\\n    \")]}},{key:\"residentName\",fn:function(props){return [_vm._v(\"\\n      \"+_vm._s(props.row.resident.name)+\"\\n    \")]}},{key:\"created_at\",fn:function(props){return [_vm._v(\"\\n      \"+_vm._s(_vm._f(\"date_filter\")(props.row.created_at))+\"\\n    \")]}},{key:\"aksi\",fn:function(props){return [_c('vx-tooltip',{staticClass:\"text-center\",attrs:{\"text\":\"Tandai untuk nonaktifkan\"}},[_c('feather-icon',{attrs:{\"icon\":\"XIcon\"},on:{\"click\":function($event){return _vm.markNotActive(props.row)}}})],1)]}},{key:\"expand-slot\",fn:function(props){return [_c('div',[_c('h6',{staticClass:\"mb-3 font-bold text-white\"},[_vm._v(\"Isi :\")]),_c('p',[_vm._v(_vm._s(props.row.body))])])]}}])}),_c('vs-pagination',{staticClass:\"mt-5\",attrs:{\"total\":_vm.totalPages},model:{value:(_vm.currentPage),callback:function ($$v) {_vm.currentPage=$$v},expression:\"currentPage\"}}),_c('vs-prompt',{attrs:{\"accept-text\":\"Kirim\",\"is-valid\":_vm.validateForm,\"title\":\"Tambah Pengumuman\",\"active\":_vm.activePrompt},on:{\"cancel\":_vm.reset,\"close\":_vm.reset,\"accept\":function($event){return _vm.sendAnnouncement()},\"update:active\":function($event){_vm.activePrompt=$event}}},[_c('div',{staticClass:\"vx-row mb-6\"},[_c('div',{staticClass:\"vx-col sm:w-1/5 w-full\"},[_c('label',{attrs:{\"for\":\"subject\"}},[_vm._v(\"Judul\")])]),_c('div',{staticClass:\"vx-col sm:w-4/5 w-full\"},[_c('vs-input',{staticClass:\"w-full\",attrs:{\"id\":\"subject\"},model:{value:(_vm.title),callback:function ($$v) {_vm.title=$$v},expression:\"title\"}})],1)]),_c('div',{staticClass:\"vx-row mb-6\"},[_c('div',{staticClass:\"vx-col sm:w-1/5 w-full\"},[_c('label',{attrs:{\"for\":\"body\"}},[_vm._v(\"Isi\")])]),_c('div',{staticClass:\"vx-col sm:w-4/5 w-full\"},[_c('vs-textarea',{staticClass:\"w-full\",attrs:{\"id\":\"body\"},model:{value:(_vm.body),callback:function ($$v) {_vm.body=$$v},expression:\"body\"}})],1)])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div class=\"md:mt-2 md:float-left text-right\">\n      <vs-dropdown vs-trigger-click class=\"cursor-pointer sm:mr-3 mr-0 sm:mb-0 mb-3\">\n        <div class=\"p-4 border border-solid d-theme-border-grey-light rounded-full d-theme-dark-bg cursor-pointer flex items-center justify-between font-medium\">\n          <span class=\"mr-2\">{{ currentPage * paginationPageSize - (paginationPageSize - 1) }} - {{ table.meta.total_record - currentPage * paginationPageSize > 0 ? currentPage * paginationPageSize : table.meta.total_record }} of {{ table.meta.total_record }}</span>\n          <feather-icon icon=\"ChevronDownIcon\" svgClasses=\"h-4 w-4\" />\n        </div>\n        <vs-dropdown-menu>\n          <vs-dropdown-item @click=\"handlePerPage(5)\">\n            <span>5</span>\n          </vs-dropdown-item>\n          <vs-dropdown-item @click=\"handlePerPage(10)\">\n            <span>10</span>\n          </vs-dropdown-item>\n          <vs-dropdown-item @click=\"handlePerPage(25)\">\n            <span>25</span>\n          </vs-dropdown-item>\n          <vs-dropdown-item @click=\"handlePerPage(50)\">\n            <span>50</span>\n          </vs-dropdown-item>\n        </vs-dropdown-menu>\n      </vs-dropdown>\n\n      <vs-button @click=\"activePrompt = !activePrompt\">Tambah Pengumuman</vs-button>\n    </div>\n\n    <vx-table search :table=\"table\" :max-items=\"table.meta.per_page\">\n      <template v-slot:no=\"props\">\n        {{ props.index }}\n      </template>\n      <template v-slot:type=\"props\">\n        {{ props.row.type | capitalize }}\n      </template>\n      <template v-slot:residentName=\"props\">\n        {{ props.row.resident.name }}\n      </template>\n      <template v-slot:created_at=\"props\">\n        {{ props.row.created_at | date_filter }}\n      </template>\n      <template v-slot:aksi=\"props\">\n        <vx-tooltip text=\"Tandai untuk nonaktifkan\"\n                    class=\"text-center\">\n          <feather-icon @click=\"markNotActive(props.row)\" icon=\"XIcon\"></feather-icon>\n        </vx-tooltip>\n      </template>\n      <template v-slot:expand-slot=\"props\">\n        <div>\n          <h6 class=\"mb-3 font-bold text-white\">Isi :</h6>\n          <p>{{ props.row.body }}</p>\n        </div>\n      </template>\n    </vx-table>\n    <vs-pagination\n        class=\"mt-5\"\n        :total=\"totalPages\"\n        v-model=\"currentPage\" />\n\n    <vs-prompt\n        @cancel=\"reset\"\n        @close=\"reset\"\n        @accept=\"sendAnnouncement()\"\n        accept-text=\"Kirim\"\n        :is-valid=\"validateForm\"\n        title=\"Tambah Pengumuman\"\n        :active.sync=\"activePrompt\">\n      <div class=\"vx-row mb-6\">\n        <div class=\"vx-col sm:w-1/5 w-full\">\n          <label for=\"subject\">Judul</label>\n        </div>\n        <div class=\"vx-col sm:w-4/5 w-full\">\n          <vs-input id=\"subject\" class=\"w-full\" v-model=\"title\" />\n        </div>\n      </div>\n      <div class=\"vx-row mb-6\">\n        <div class=\"vx-col sm:w-1/5 w-full\">\n          <label for=\"body\">Isi</label>\n        </div>\n        <div class=\"vx-col sm:w-4/5 w-full\">\n          <vs-textarea id=\"body\" class=\"w-full\" v-model=\"body\"></vs-textarea>\n        </div>\n      </div>\n    </vs-prompt>\n  </div>\n</template>\n\n<script>\n  import announcement from \"../../http/announcement\";\n  export default {\n    name: \"Announcement\",\n    data() {\n      return {\n        title: '',\n        body: '',\n        activePrompt: false,\n        table: {\n          data: [],\n          columns: [\n            { key: 'no', label: 'No' },\n            { key: 'title', label: 'Judul' },\n            { key: 'created_at', label: 'Tanggal Pengumuman' },\n            { key: 'aksi' }\n          ],\n          meta: {},\n          page: 1,\n          perPage: 10\n        }\n      }\n    },\n    computed: {\n      paginationPageSize() {\n        if(this.table.meta) return this.table.meta.per_page\n        else return 10\n      },\n      totalPages() {\n        if(this.table.meta) return Number(this.table.meta.last_page)\n        else return Number(0);\n      },\n      currentPage: {\n        get() {\n          if(this.table.meta) return this.table.meta.current_page\n          else return 1\n        },\n        set(val) {\n          this.table.page = val;\n          this.fetchAnnouncement();\n        }\n      },\n      validateForm() {\n        return this.title !== '' && this.body !== '';\n      }\n    },\n    methods: {\n      fetchAnnouncement() {\n        const params = `page=${this.table.page}&perPage=${this.table.perPage}`;\n        announcement.index(params)\n          .then((res) => {\n            const { data } = res.data;\n            this.table.data = data.record;\n            this.table.meta = data.meta_pagination;\n          }).catch((err) => {\n          throw new Error(err);\n        });\n      },\n      sendAnnouncement() {\n        new Promise((resolve, reject) => {\n          const payload = {\n            title: this.title,\n            body: this.body\n          };\n          announcement.store(payload)\n            .then((res) => {\n              if(res.data.data) {\n                this.$vs.notify({\n                  title: 'Berhasil!',\n                  text: 'Pemberitahuan Anda telah diterbitkan',\n                  iconPack: 'feather',\n                  icon: 'icon-check-circle',\n                  color: 'primary'\n                });\n                this.fetchAnnouncement();\n                this.reset();\n                resolve(res);\n              } else {\n                reject('Gagal!')\n              }\n            }).catch((err) => {\n            this.$vs.notify({\n              title: 'Gagal!',\n              text: 'Maaf ada kesalahan, coba lagi',\n              iconPack: 'feather',\n              icon: 'icon-alert-circle',\n              color: 'danger'\n            });\n            reject(err);\n          })\n        });\n      },\n      markNotActive(data) {\n        if(data.is_active === 1) {\n          announcement.markNotActive(data.id)\n            .then(() => {\n              this.$vs.notify({\n                title: 'Berhasil!',\n                text: '',\n                iconPack: 'feather',\n                icon: 'icon-check-circle',\n                color: 'primary'\n              });\n              this.fetchAnnouncement();\n            }).catch((err) => {\n            throw new Error(err);\n          })\n        }\n      },\n      handlePerPage(perPage) {\n        this.table.perPage = perPage;\n        this.fetchAnnouncement();\n      },\n      reset() {\n        this.title = '';\n        this.body = '';\n      }\n    },\n    created() {\n      this.fetchAnnouncement();\n    }\n  }\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Announcement.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Announcement.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Announcement.vue?vue&type=template&id=22f84d9b&scoped=true&\"\nimport script from \"./Announcement.vue?vue&type=script&lang=js&\"\nexport * from \"./Announcement.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"22f84d9b\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}